# 电厂污染物排放预测系统 - 测试说明文档

本文档提供了电厂污染物排放预测系统的测试方法和流程说明，帮助您验证系统的各项功能和性能是否符合预期要求。

## 测试脚本概览

系统提供了以下测试脚本，位于 `测试脚本` 目录下：

1. **功能测试脚本** (`功能测试脚本.py`)：验证系统各个功能模块是否按照预期工作。
2. **性能测试脚本** (`性能测试脚本.py`)：评估系统在各种负载条件下的性能表现。
3. **用户体验测试脚本** (`用户体验测试脚本.py`)：评估系统的用户交互体验。
4. **API连接测试脚本** (`test_api_connection.py`)：测试前端与后端API的连接状态。
5. **前端API测试** (`test_frontend_api.js`)：测试前端JavaScript与API的交互。
6. **系统测试脚本** (`系统测试脚本.py`)：执行端到端的系统测试，验证各组件的协同工作能力。
7. **综合测试执行脚本** (`run_all_tests.py`)：统一执行所有测试并生成综合报告。

## 测试环境准备

在执行测试前，请确保：

1. 系统已完成部署，后端API服务和前端服务均已启动。
2. 数据库已正确配置并包含测试数据。
3. 预测模型已加载完成。
4. 已安装所有必要的Python依赖项：
   ```bash
   pip install requests selenium pandas numpy matplotlib
   ```
5. 对于UI测试，需安装Chrome浏览器和对应版本的ChromeDriver。

## 执行测试

### 执行所有测试（推荐）

使用综合测试执行脚本可以一次性运行所有测试并生成详细报告：

```bash
python 测试脚本/run_all_tests.py --url http://localhost:8000
```

参数说明：
- `--url`：指定API服务的基础URL，默认为 http://localhost:8000
- `--skip`：指定要跳过的测试类型，多个类型用逗号分隔，例如 `--skip 功能测试,性能测试`

### 单独执行特定测试

如果需要单独执行某类测试，可以直接运行对应的测试脚本：

1. **功能测试**：
   ```bash
   python 测试脚本/功能测试脚本.py --url http://localhost:8000
   ```

2. **性能测试**：
   ```bash
   python 测试脚本/性能测试脚本.py --url http://localhost:8000 --concurrent 10 --duration 60
   ```
   
3. **用户体验测试**：
   ```bash
   python 测试脚本/用户体验测试脚本.py --url http://localhost:8000 --frontend http://localhost:3000
   ```

4. **系统测试**：
   ```bash
   python 测试脚本/系统测试脚本.py --url http://localhost:8000 --frontend http://localhost:3000
   ```

5. **API连接测试**：
   ```bash
   python 测试脚本/test_api_connection.py --url http://localhost:8000
   ```

6. **前端API测试**（需要在浏览器中执行）：
   - 打开浏览器开发者工具
   - 将 `test_frontend_api.js` 的内容复制到控制台
   - 修改 `BASE_URL` 变量为正确的API地址
   - 执行脚本

## 查看测试结果

执行测试后，系统会生成以下几种类型的结果文件：

1. **日志文件**：每个测试脚本会生成对应的日志文件（如 `功能测试结果.log`）
2. **报告文件**：
   - 文本报告（`.txt`）：包含测试结果的详细描述
   - JSON报告（`.json`）：以JSON格式存储测试数据，便于进一步分析
3. **图表**：部分测试会生成可视化图表（`.png`）
4. **截图**：UI测试过程中的屏幕截图

使用综合测试执行脚本时，所有结果会集中存放在 `测试结果` 目录中，按测试类型分类。

## 测试结果解读

### 功能测试

- **通过**：API功能按预期工作，所有断言都成功
- **失败**：一个或多个API功能出现问题或响应不符合预期

### 性能测试

- **关注指标**：平均响应时间、最大响应时间、每秒请求数、CPU使用率、内存使用率
- **合格标准**：
  - 平均响应时间 < 200ms
  - CPU使用率 < 70%
  - 内存使用率 < 80%

### 用户体验测试

- **测试内容**：页面加载时间、表单操作流畅度、导航操作响应时间、错误信息清晰度
- **评分标准**：脚本会给出总体评分和用户体验等级（优秀/良好/一般/需改进）

### 系统测试

- **关注点**：各组件是否能协同工作，端到端流程是否畅通
- **测试场景**：包括前后端连接、数据库连接、模型加载、完整业务流程等

## 常见问题排查

1. **测试失败时查看日志**：详细错误信息会记录在对应的日志文件中
2. **连接问题**：检查API服务和前端服务是否正常运行，端口是否正确
3. **数据库问题**：验证数据库连接配置和测试数据是否正确
4. **浏览器测试问题**：确保已安装正确版本的ChromeDriver
5. **权限问题**：某些测试（如生成报告）可能需要写入权限

## 持续集成

测试脚本设计支持在CI/CD环境中运行。如需在CI/CD管道中集成测试，建议：

1. 将测试添加为单独的CI阶段
2. 使用 `run_all_tests.py` 脚本运行所有测试
3. 将测试报告作为CI构建的工件保存

---

如有任何问题或需要进一步的测试支持，请联系系统管理员。 